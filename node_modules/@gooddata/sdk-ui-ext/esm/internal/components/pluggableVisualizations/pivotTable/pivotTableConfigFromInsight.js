import { __assign } from "tslib";
// (C) 2022 GoodData Corporation
import isEmpty from "lodash/isEmpty";
import isNil from "lodash/isNil";
import { insightProperties } from "@gooddata/sdk-model";
import { pivotTableMenuForCapabilities } from "@gooddata/sdk-ui-pivot";
export function pivotTableConfigFromInsight(insight, ctx) {
    var _a;
    var properties = insightProperties(insight);
    var controls = properties === null || properties === void 0 ? void 0 : properties.controls;
    var columnSizing = controls && getColumnSizingFromControls(controls, ctx);
    var menuConfig = (ctx === null || ctx === void 0 ? void 0 : ctx.backend) && pivotTableMenuForCapabilities(ctx.backend.capabilities);
    var menuProp = !isEmpty(menuConfig) ? { menu: menuConfig } : {};
    var separatorsConfig = (_a = ctx === null || ctx === void 0 ? void 0 : ctx.settings) === null || _a === void 0 ? void 0 : _a.separators;
    var separatorsProp = !isEmpty(separatorsConfig) ? { separators: separatorsConfig } : {};
    return __assign(__assign({ columnSizing: columnSizing }, menuProp), separatorsProp);
}
function getColumnSizingFromControls(controls, ctx) {
    var _a;
    var columnWidths = controls.columnWidths;
    var columnWidthsProp = !isEmpty(columnWidths) ? { columnWidths: columnWidths } : {};
    var growToFitConfig = (_a = ctx === null || ctx === void 0 ? void 0 : ctx.settings) === null || _a === void 0 ? void 0 : _a.enableTableColumnsGrowToFit;
    var growToFitProp = !isNil(growToFitConfig) ? { growToFit: growToFitConfig } : {};
    return __assign(__assign({}, columnWidthsProp), growToFitProp);
}
//# sourceMappingURL=pivotTableConfigFromInsight.js.map